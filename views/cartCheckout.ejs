<%- include('_layout/header'); -%>
    <% if (typeof cart !== "undefined") { %>
        <h1 class="page-title">my cart</h1>
        <table class="table table-striped">
            <tr>
                <th>image</th>
                <th>title</th>
                <th>price</th>
                <th>quantity</th>
                <th></th>
                <th>sub total</th>
            </tr>
            <% var total = 0 %>
            <% cart.forEach(function (product) { %>
            <% var sub = parseFloat(product.price * product.quantity).toFixed(2) %>
            <% total += +sub %>
                <tr>
                    <td><img src="<%= product.image %>" width="100" height="100"></td>
                    <td><%= product.title %></td>
                    <td>$<%= parseFloat(product.price).toFixed(2) %></td>
                    <td><%= product.quantity %></td>
                    <td>
                        <a href="/cart/update/<%= product.title %>?action=add">+</a>
                        <a href="/cart/update/<%= product.title %>?action=remove">-</a>
                        <a href="/cart/update/<%= product.title %>?action=clear">clear</a>
                    </td>
                    <td><%= sub %></td>
                </tr>
            <% }); %>
            <tr>
                <td align="right" colspan="6">total $<%= parseFloat(total).toFixed(2) %></td>
            </tr>
            <tr>
                <td align="right" colspan="6">
                    <a href="/cart/clear" class="btn btn-danger confirmation">clear cart</a>
                    <a href="#" class="btn btn-primary buyNow">buy now</a>
                </td>
            </tr>
        </table>
    <% } else { %>
        <h3 class="text-center">Your cart is empty</h3>
    <% } %>

<%- include('_layout/footer'); -%>